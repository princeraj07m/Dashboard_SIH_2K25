<app-header></app-header>
<div class="notifications-container">


  <div class="main-content">
    <!-- Main Notifications Area -->
    <div class="notifications-main">
      <div class="notifications-title">
        <h2>Notifications</h2>
        <p class="subtitle">Review current alerts or browse your notification history.</p>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button
          class="tab-btn"
          [class.active]="activeTab === 'current'"
          (click)="setActiveTab('current')">
          Current Notifications
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'archive'"
          (click)="setActiveTab('archive')">
          Notification Archive
        </button>
      </div>

      <!-- Alert Summary -->
      <div class="alert-summary" *ngIf="activeTab === 'current' && criticalCount > 0">
        <p>You have {{ criticalCount }} critical alert{{ criticalCount > 1 ? 's' : '' }}. Let's take a look.</p>
      </div>

      <!-- Search and Filters -->
      <div class="search-filters">
        <div class="search-bar">
          <input
            type="text"
            placeholder="Search notifications by keyword, category, or timestamp..."
            [(ngModel)]="searchQuery"
            (input)="onSearchChange()"
            class="search-input">
          <span class="search-icon">üîç</span>
        </div>

        <div class="filters">
          <button
            class="filter-btn"
            [class.active]="activeFilter === 'all'"
            (click)="setActiveFilter('all')">
            All
          </button>
          <button
            class="filter-btn"
            [class.active]="activeFilter === 'critical'"
            (click)="setActiveFilter('critical')">
            Critical
          </button>
          <button
            class="filter-btn"
            [class.active]="activeFilter === 'normal'"
            (click)="setActiveFilter('normal')">
            Normal
          </button>
          <button
            class="filter-btn"
            [class.active]="activeFilter === 'system'"
            (click)="setActiveFilter('system')">
            System
          </button>

          <div class="mark-all-read">
            <input
              type="checkbox"
              id="markAllRead"
              [(ngModel)]="markAllAsRead"
              (change)="toggleMarkAllAsRead()">
            <label for="markAllRead">Mark All as Read</label>
          </div>
        </div>
      </div>

      <!-- Notifications List -->
      <div class="notifications-list">
        <div
          *ngFor="let notification of filteredNotifications"
          class="notification-item"
          [ngClass]="getNotificationTypeClass(notification.type)">

          <div class="notification-icon" [style.color]="notification.iconColor">
            {{ notification.icon }}
          </div>

          <div class="notification-content">
            <div class="notification-header">
              <h4 class="notification-title">{{ notification.title }}</h4>
              <span class="notification-time">{{ notification.timestamp }}</span>
            </div>
            <p class="notification-description">{{ notification.description }}</p>

            <div class="notification-actions" *ngIf="notification.actions">
              <button
                *ngFor="let action of notification.actions"
                class="action-btn"
                [ngClass]="action.type"
                (click)="action.action()">
                {{ action.label }}
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="filteredNotifications.length === 0" class="no-notifications">
          <p>No notifications found matching your criteria.</p>
        </div>
      </div>
    </div>

    <!-- Right Sidebar -->
    <div class="sidebar">
      <!-- Generate Report -->
      <div class="sidebar-card">
        <h3>Generate Report</h3>
        <p>Analyze alert trends and system performance over a selected period.</p>

        <div class="form-group">
          <label for="reportPeriod">Select Period</label>
          <select
            id="reportPeriod"
            [(ngModel)]="reportPeriod"
            class="form-select">
            <option value="last7days">Last 7 Days</option>
            <option value="last30days">Last 30 Days</option>
            <option value="last3months">Last 3 Months</option>
            <option value="lastyear">Last Year</option>
          </select>
        </div>

        <button class="btn-primary" (click)="generateReport()">
          üìä Generate Summary
        </button>
      </div>

      <!-- Notification Preferences -->
      <div class="sidebar-card">
        <h3>Notification Preferences</h3>
        <h4>Alert Types</h4>

        <div class="preference-item">
          <input type="checkbox" id="criticalAlerts" checked>
          <label for="criticalAlerts">Critical Alerts</label>
        </div>

        <div class="preference-item">
          <input type="checkbox" id="normalAlerts" checked>
          <label for="normalAlerts">Normal Alerts</label>
        </div>

        <div class="preference-item">
          <input type="checkbox" id="systemUpdates" checked>
          <label for="systemUpdates">System Updates</label>
        </div>

        <button class="btn-primary" (click)="savePreferences()">
          Save Preferences
        </button>
      </div>
    </div>
  </div>
</div>


<app-footer></app-footer>
